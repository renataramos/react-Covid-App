{"ast":null,"code":"var _jsxFileName = \"/Users/utilizador/Documents/academia/LocalRepo/covid-app/react-Covid-App/src/components/country-details/CountryDetails.js\";\nimport React from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport { browserHistory } from 'react-router';\nimport Loading from '../Loading.js';\nimport CountryChart from './CountryChart.js';\nimport { fetchCountryData } from '../ApiService.js';\n\nfunction catchError() {\n  browserHistory.push('/page-not-found');\n  window.location.reload();\n}\n\nasync function fetchData(countryID) {\n  const data = await fetch(`https://disease.sh/v2/countries/${countryID}`);\n\n  if (!data.ok) {\n    throw new Error(\"Not found\");\n  }\n\n  return data.json();\n}\n\nexport default function Country() {\n  const [country, setCountry] = useState({});\n  const [flag, setFlag] = useState({});\n  const [loadingStatus, setLoadingStatus] = useState({});\n  const {\n    countryID\n  } = useParams();\n  useEffect(() => {\n    let isMounted = true;\n    setLoadingStatus(true);\n    fetchData(countryID).then(data => {\n      if (isMounted) {\n        setCountry(data);\n        setFlag(data.countryInfo.flag);\n        setLoadingStatus(false);\n      }\n    }).catch(catchError);\n    return () => isMounted = false;\n  }, []);\n\n  const convertToMillion = function (number) {\n    return Math.round(number / 1000000);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 8\n    }\n  }, loadingStatus === true ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 10\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    id: \"country-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"country-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, country.country)), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"_in \", /*#__PURE__*/React.createElement(\"em\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 25\n    }\n  }, country.continent))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"country-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: flag,\n    alt: \"flag of the country in question\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"details-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 33\n    }\n  }, country.cases, \" infected, \", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 62\n    }\n  }, \"of which \", country.critical, \" are in critical status\"), \".\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 33\n    }\n  }, country.deaths, \" deaths, \", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 61\n    }\n  }, \" of which \", country.todayDeaths, \" people died today\"), \". \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 33\n    }\n  }, country.recovered, \" recovered, \", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 67\n    }\n  }, \"and \", country.todayCases, \" new cases were diagnosed\"), \".\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 33\n    }\n  }, country.tests, \" tests, \", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 59\n    }\n  }, \"in a country of \", convertToMillion(country.population), \" million inhabitants\"), \".\"))))))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"country-chart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CountryChart, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    className: \"fas fa-home\",\n    id: \"homeBtn\",\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }))));\n}","map":{"version":3,"sources":["/Users/utilizador/Documents/academia/LocalRepo/covid-app/react-Covid-App/src/components/country-details/CountryDetails.js"],"names":["React","useParams","Link","useEffect","useState","browserHistory","Loading","CountryChart","fetchCountryData","catchError","push","window","location","reload","fetchData","countryID","data","fetch","ok","Error","json","Country","country","setCountry","flag","setFlag","loadingStatus","setLoadingStatus","isMounted","then","countryInfo","catch","convertToMillion","number","Math","round","continent","cases","critical","deaths","todayDeaths","recovered","todayCases","tests","population"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {useParams, Link} from 'react-router-dom'\nimport {useEffect, useState} from 'react'\nimport {browserHistory} from 'react-router'\nimport Loading from '../Loading.js'\nimport CountryChart from './CountryChart.js'\nimport {fetchCountryData} from '../ApiService.js'\n\n\n\nfunction catchError(){\n    browserHistory.push('/page-not-found')\n    window.location.reload()\n}\n\nasync function fetchData(countryID){\n    const data = await fetch(`https://disease.sh/v2/countries/${countryID}`)\n\n    if (!data.ok){\n        throw new Error(\"Not found\")\n    }\n        \n    return data.json()\n}\n\nexport default function Country() {\n\n    const [country, setCountry] = useState({})\n    const [flag, setFlag] = useState({})\n    const [loadingStatus, setLoadingStatus]  = useState({})\n\n    const {countryID} = useParams();\n\n\n    useEffect(()=>{\n        let isMounted=true;\n            \n        setLoadingStatus(true)    \n        fetchData(countryID).then((data)=> {\n            if (isMounted){\n                setCountry(data)\n                setFlag(data.countryInfo.flag)\n                setLoadingStatus(false)\n            }    \n        }).catch(catchError);\n\n        return () => isMounted = false}, [])\n            \n\n    const convertToMillion = function(number){\n            return Math.round(number/1000000);\n    }\n\n    return (\n       <div>\n       {loadingStatus=== true\n       ? <Loading/>\n       : <div id=\"country-container\">\n            <div id=\"country-title\">\n                <h3><strong>{country.country}</strong></h3>\n                <h5>_in <em>{country.continent}</em></h5>\n            </div>\n            <div id=\"country-card\">\n                <div id =\"details\">\n                <table>\n                    <thead>\n                        <tr>\n                            <td><img src={flag} alt=\"flag of the country in question\"></img></td>\n                            <td>\n                            <div id=\"details-text\">\n                                <p>{country.cases} infected, <strong>of which {country.critical} are in critical status</strong>.</p>\n                                <p>{country.deaths} deaths, <strong> of which {country.todayDeaths} people died today</strong>. </p>\n                                <p>{country.recovered} recovered, <strong>and {country.todayCases} new cases were diagnosed</strong>.</p>\n                                <p>{country.tests} tests, <strong>in a country of {convertToMillion(country.population)} million inhabitants</strong>.</p>\n                            </div>\n                            </td> \n                        </tr>\n                    </thead>\n                    </table>\n                </div>\n                <br></br>\n                <div id=\"country-chart\"><CountryChart/></div>\n                <Link className=\"fas fa-home\" id=\"homeBtn\" to=\"/\"></Link>\n            </div>\n        </div>}\n        </div>\n    \n    )\n    \n}\n\n        \n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}